<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<script src="script/jquery-1.6.4.js" type="text/javascript"></script>
<link href="css/common.css" media="screen" rel="stylesheet" type="text/css">
<link href="css/screen.css" media="only screen and (min-device-width: 600px)" rel="stylesheet" type="text/css">
<link href="css/mobile.css" media="only screen and (max-device-width: 600px)" rel="stylesheet" type="text/css">
<script type="text/javascript" src="script/Date.js"></script>
<script type="text/javascript" src="script/Destination.js"></script>
<script type="text/javascript" src="script/Trip.js"></script>
<script type="text/javascript" src="script/Link.js"></script>
<script type="text/javascript" src="script/SnowReport.js"></script>
<script type="text/javascript" src="script/destinations.js"></script>
<script type="text/javascript">
var withMillis = false;

(function(){
var params = window.location.href.split('?')[1];
if(params)
{
	params = params.split("&");
	for (var i=0; i<params.length; i++)
	{
		var param = params[i].toLowerCase();		
		if(param.indexOf('withmillis') == 0)
		{
			var value = param.split('=')[1];
			if(value)
			{
				withMillis = value == 'true';
			}
		}
	}
}
})();
	
var trips = [	
	new Trip(portesDuSoleil, 'Bonus Weekend', 'Montriond, France',
		new Date('December 11, 2014 12:20:00'), 
		new Date('December 12, 2014 10:00:00'), 
		new Date('December 15, 2014 11:10:00')),
	new Trip(portesDuSoleil, '"Actix"', 'Les Gets, France',
		new Date('January 18, 2015 12:00:00'), 
		new Date('January 19 2015 10:00:00'), 
		new Date('January 24, 2015 12:00:00')),	
	new Trip(portesDuSoleil, "Rider Social", "Chatel, France",
		new Date('February 1, 2015 12:00:00'), 
		new Date('February 2, 2015 10:00:00'), 
		new Date('February 8, 2015 12:00:00')),	
	new Trip(portesDuSoleil, "Slushy Week", "Montriond, France",
		new Date('March 15, 2015 12:00:00'), 
		new Date('March 16, 2015 10:00:00'), 
		new Date('March 22, 2015 12:00:00'))
	];	

trips.sort(function(a, b)
{
	return a.flight - b.flight;
});
	
$(document).ready(function() {

var parent = $('#destinations');
for(var i=0; i< trips.length; i++)
{
	var trip = trips[i];	
	trip.render(parent);
}

updating =0;


function update()
{	
	var now = new Date();
	for(var i=0; i< trips.length; i++)
	{
		var trip = trips[i];		
		trip.update(now);
	}	
	updating =  setTimeout(update, withMillis ? 100 : 1000);
}
update();
});
</script>
<title>Snowboarding !</title>
</head>
<body>	
	<div id="outer">
		<h1><img src="img/flux.png"/>Snowboarding 2014 Dashboard</h1>
		<div id="destinations"></div>
		<div style="clear:both"></div> 
		<button onclick="clearTimeout(updating)" type="button" style="display:none">Stop</button>			
	</div>
</body>
</html>
